{"ast":null,"code":"import _objectSpread from\"/Users/rashmishrees/Desktop/prabhu-invoice-project/rashmi-work-done/sdd_using_axios/sddusingaxios/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/rashmishrees/Desktop/prabhu-invoice-project/rashmi-work-done/sdd_using_axios/sddusingaxios/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import CustomizedSearchBar from'../../atoms/CustomizedSearchBar/CustomizedSearchBar';import CustomizedDownload from'../../atoms/CustomizedDownload/CustomizedDownload';import CustomizedPrint from'../../atoms/CustomizedPrint/CustomizedPrint';import{CSVLink}from\"react-csv\";import OpenModal from'../../molecules/OpenModal/OpenModal';import CustomizedEditIcon from'../../atoms/CustomizedEditIcon/CustomizedEditIcon';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DisplayCustomerTable=function DisplayCustomerTable(_ref){var currentstatus=_ref.currentstatus,setTableDataEvent=_ref.setTableDataEvent,tabledata=_ref.tabledata,modalview=_ref.modalview,api=_ref.api;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),filterflag=_useState2[0],setfilterflag=_useState2[1];var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),searchvalue=_React$useState2[0],setSearchvalue=_React$useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),rowdata=_useState4[0],setrowdata=_useState4[1];useEffect(function(){if(filterflag&&currentstatus){statusfiltercustomerdata();}else{displayCustomerFollowUpData();}},[currentstatus]);var headers=[{label:'Comments',key:'comments'},{label:'Customer address',key:'customer_address'},{label:'Customer name',key:'customer_name'},{label:'Customer reference No',key:'customer_reference_no'},{label:'Enquired product',key:'enquired_product'},{label:'Enquired product hsn code',key:'enquired_product_hsn_code'},{label:'Enquired date',key:'enquiry_date'},{label:'Final status',key:'final_status'},{label:'Follow up call',key:'follow_up_call'},{label:'Phone number',key:'phone_number'},{label:'Quantity',key:'quantity'}];var csvReport={filename:'CustomerReports.csv',headers:headers,data:tabledata};var rowdataevent=function rowdataevent(e){setrowdata(e);};var displayCustomerFollowUpData=function displayCustomerFollowUpData(){api.get('customer/displayCustomerFollowUpData').then(function(res){setTableDataEvent(res.data);//   setCustomerdata(data);\nsetfilterflag(true);});};useEffect(function(){if(searchvalue===\"\"){displayCustomerFollowUpData();}},[searchvalue]);var statusfiltercustomerdata=function statusfiltercustomerdata(){api.post('customer/statusfiltercustomerdata',{params:{status:currentstatus}}).then(function(res){setTableDataEvent(res.data);});};var searchHandle=function searchHandle(e){setSearchvalue(e.target.value);};var searchclicked=function searchclicked(){fetch('http://localhost:3000/getCustomerFollowUpData',{method:'post',headers:{'Content-Type':'application/json'},mode:'cors',body:JSON.stringify({phoneno:searchvalue,customer_name:searchvalue})}).then(function(res){return res.json();}).then(function(data){setTableDataEvent(data);});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CustomizedSearchBar,{labelname:\"customer :- phone number / name\",Btnname:\"search\",onHandleChangeEvent:searchHandle,goEventClicked:searchclicked}),/*#__PURE__*/_jsxs(\"div\",{children:[tabledata&&tabledata.length?/*#__PURE__*/_jsx(CSVLink,_objectSpread(_objectSpread({},csvReport),{},{children:/*#__PURE__*/_jsx(CustomizedDownload,{})})):null,/*#__PURE__*/_jsx(CustomizedPrint,{})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"theadalter\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Customer Reference Number\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Enquiry Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Customer Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Customer Address\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Enquired Product Hsn Code\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Enquired Product\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Comments\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Follow Up Call \"}),/*#__PURE__*/_jsx(\"th\",{children:\"Final Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:tabledata&&tabledata.length?tabledata.map(function(data,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[data.customer_reference_no,\" \"]}),/*#__PURE__*/_jsx(\"td\",{children:data.enquiry_date!=null?data.enquiry_date=data.enquiry_date.substring(0,10):data.enquiry_date=data.enquiry_date}),/*#__PURE__*/_jsx(\"td\",{children:data.customer_name}),/*#__PURE__*/_jsxs(\"td\",{children:[data.customer_address,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[data.phone_number,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[data.product_hsn_code,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[data.product,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[data.quantity,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[data.comments,\" \"]}),/*#__PURE__*/_jsx(\"td\",{children:data.follow_up_call!=null?data.follow_up_call=data.follow_up_call.substring(0,10):data.follow_up_call=data.follow_up_call}),/*#__PURE__*/_jsxs(\"td\",{children:[data.final_status,\" \"]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(OpenModal,{displayCustomerFollowUpData:displayCustomerFollowUpData,rowdata:rowdata,modalview:modalview,modalbuttonname:/*#__PURE__*/_jsx(CustomizedEditIcon,{onClick:function onClick(){rowdataevent(data);}})})})})]},i);}):/*#__PURE__*/_jsx(\"p\",{children:\"No Record!\"})})]})})]});};export default DisplayCustomerTable;","map":{"version":3,"names":["React","useEffect","useState","CustomizedSearchBar","CustomizedDownload","CustomizedPrint","CSVLink","OpenModal","CustomizedEditIcon","DisplayCustomerTable","currentstatus","setTableDataEvent","tabledata","modalview","api","filterflag","setfilterflag","searchvalue","setSearchvalue","rowdata","setrowdata","statusfiltercustomerdata","displayCustomerFollowUpData","headers","label","key","csvReport","filename","data","rowdataevent","e","get","then","res","post","params","status","searchHandle","target","value","searchclicked","fetch","method","mode","body","JSON","stringify","phoneno","customer_name","json","length","map","i","customer_reference_no","enquiry_date","substring","customer_address","phone_number","product_hsn_code","product","quantity","comments","follow_up_call","final_status"],"sources":["/Users/rashmishrees/Desktop/prabhu-invoice-project/rashmi-work-done/sdd_using_axios/sddusingaxios/src/components/molecules/DisplayCustomerTable/DisplayCustomerTable.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport CustomizedSearchBar from '../../atoms/CustomizedSearchBar/CustomizedSearchBar';\nimport CustomizedDownload from '../../atoms/CustomizedDownload/CustomizedDownload';\nimport CustomizedPrint from '../../atoms/CustomizedPrint/CustomizedPrint';\nimport {CSVLink} from \"react-csv\";\nimport OpenModal from '../../molecules/OpenModal/OpenModal';\nimport CustomizedEditIcon from '../../atoms/CustomizedEditIcon/CustomizedEditIcon';\n\nconst DisplayCustomerTable = ({\n    currentstatus,\n    setTableDataEvent,\n    tabledata,\n    modalview,\n    api\n}) => {\n    const [filterflag, setfilterflag] = useState(false);\n    const [searchvalue, setSearchvalue] = React.useState('');\n    const [rowdata, setrowdata] = useState({});\n    useEffect(()=>{\n        if (filterflag && currentstatus ){\n            statusfiltercustomerdata();\n        }else {\n            displayCustomerFollowUpData();   \n        }\n    },[currentstatus])\n\n    const headers =[\n        {label:'Comments', key:'comments'},\n        {label:'Customer address', key:'customer_address'},\n        {label:'Customer name', key:'customer_name'},\n        {label:'Customer reference No', key:'customer_reference_no'},\n        {label:'Enquired product', key:'enquired_product'},\n        {label:'Enquired product hsn code', key:'enquired_product_hsn_code'},\n        {label:'Enquired date', key:'enquiry_date'},\n        {label:'Final status', key:'final_status'},\n        {label:'Follow up call', key:'follow_up_call'},\n        {label:'Phone number', key:'phone_number'},\n        {label:'Quantity', key:'quantity'}\n      ];\n      const csvReport = {\n        filename:'CustomerReports.csv',\n        headers:headers,\n        data:tabledata\n      }\n    const rowdataevent = (e) => {\n        setrowdata(e);\n    }\n    const displayCustomerFollowUpData = () => {\n        api.get('customer/displayCustomerFollowUpData')\n        .then((res)=>{\n            setTableDataEvent(res.data);\n            //   setCustomerdata(data);\n              setfilterflag(true);\n        })\n    }\n    useEffect(()=>{\n        if (searchvalue === \"\"){\n            displayCustomerFollowUpData();\n        }\n    },[searchvalue])\n    const statusfiltercustomerdata = () => {\n        api.post('customer/statusfiltercustomerdata',{\n            params:{\n                status:currentstatus\n            }\n        })\n        .then((res)=>{\n            setTableDataEvent(res.data);\n        })\n  }\n  const searchHandle = (e) => {\n    setSearchvalue(e.target.value);\n  }\n  const searchclicked = () => {\n    fetch('http://localhost:3000/getCustomerFollowUpData',{\n        method:'post',\n        headers:{\n            'Content-Type':'application/json'\n        },\n        mode:'cors',\n        body:JSON.stringify({\n            phoneno:searchvalue,\n            customer_name:searchvalue\n        })\n    })\n    .then(res=>{\n        return res.json()\n    })\n    .then(data => {\n        setTableDataEvent(data);\n    })\n  }\n    return(\n        <div>\n            <CustomizedSearchBar \n                labelname=\"customer :- phone number / name\"\n                Btnname=\"search\"\n                onHandleChangeEvent={searchHandle}\n                goEventClicked={searchclicked}\n            />\n            <div>\n                {\n                    tabledata && tabledata.length ? \n                    <CSVLink {...csvReport}><CustomizedDownload/></CSVLink> : null\n                }\n                <CustomizedPrint />\n            </div>\n            <div className='table-responsive'>\n                <table className='table table-striped table-bordered'>\n                    <thead className='theadalter'>\n                        <tr>\n                            <th>Customer Reference Number</th>\n                            <th>Enquiry Date</th>\n                            <th>Customer Name</th>\n                            <th>Customer Address</th>\n                            <th>Phone Number</th>\n                            <th>Enquired Product Hsn Code</th>\n                            <th>Enquired Product</th>\n                            <th>Quantity</th>\n                            <th>Comments</th>\n                            <th>Follow Up Call </th>\n                            <th>Final Status</th>\n                            <th>Action</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {\n                            tabledata && tabledata.length \n                            ? tabledata.map((data, i)=>(\n                                <tr key={i}>\n                                <td>{data.customer_reference_no} </td>\n                                {/* <td>{data.enquiry_date.substring(0,10)}</td> */}\n                                <td>\n                                    {\n                                        data.enquiry_date != null ?\n                                        data.enquiry_date = data.enquiry_date.substring(0,10):\n                                        data.enquiry_date = data.enquiry_date\n                                    }\n                                </td>\n                                <td>{data.customer_name}</td>\n                                <td>{data.customer_address} </td>\n                                <td>{data.phone_number} </td>\n                                <td>{data.product_hsn_code} </td>\n                                <td>{data.product} </td>\n                                <td>{data.quantity} </td>\n                                <td>{data.comments} </td>\n                                <td>\n                                    {\n                                        data.follow_up_call != null ? \n                                        data.follow_up_call = data.follow_up_call.substring(0,10): \n                                        data.follow_up_call = data.follow_up_call\n                                    } \n                                </td>\n                                <td>{data.final_status} </td>\n                                <td>\n                                            <div>\n                                                <OpenModal \n                                                    displayCustomerFollowUpData={displayCustomerFollowUpData}\n                                                    rowdata={rowdata}\n                                                    modalview={modalview}\n                                                    modalbuttonname={<CustomizedEditIcon \n                                                                        onClick={()=>{rowdataevent(data)}}\n                                                                    />} \n                                                />\n                                                {/* <CustomizedDeleteIcon onClick={()=>(deleteevent(data.product_hsn_code))} /> */}\n                                            </div>\n                                        </td>\n                            </tr>\n                            ))\n                            : <p>No Record!</p>\n                        }\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    );\n}\nexport default DisplayCustomerTable;"],"mappings":"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"},"metadata":{},"sourceType":"module"}