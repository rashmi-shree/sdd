{"ast":null,"code":"import _slicedToArray from\"/Users/rashmishrees/Documents/My projects to show case/d/sdd/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import ArrowBackIcon from'@mui/icons-material/ArrowBack';import OpenModal from'../../components/molecules/OpenModal/OpenModal';import{useNavigate}from'react-router-dom';import HeaderWithLogout from'../../pages/Header/HeaderWithLogout';import moment from'moment';import FullScreenModal from\"../../components/molecules/FullScreenModal/FullScreenModal\";import'../../style/style.css';import Button from'@mui/material/Button';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ViewInvoicePage=function ViewInvoicePage(_ref){var api=_ref.api;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),invoiceData=_useState2[0],setInvoiceData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),invoiceFormData=_useState4[0],setInvoiceFormData=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),searchData=_useState6[0],setSearchData=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),modalview=_useState8[0],setModalview=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),query=_useState10[0],setQuery=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),open=_useState12[0],setOpen=_useState12[1];var openevent=function openevent(e){setOpen(e);};var navigate=useNavigate();var onHandleChangeEvent=function onHandleChangeEvent(event){setSearchData(event.target.value);};var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),check=_useState14[0],setcheck=_useState14[1];useEffect(function(){setcheck(JSON.parse(window.localStorage.getItem('logoutbtn')));},[]);useEffect(function(){if(check==null){navigate('/');}},[check]);useEffect(function(){api.get('/delivery/getInvoices').then(function(res){setInvoiceData(res.data);});},[]);var openinvoiceevent=function openinvoiceevent(invoiceNo){api.post('/delivery/getDeliveryReportData',{params:{invoiceNo:invoiceNo}}).then(function(res){setInvoiceFormData(res.data);});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(HeaderWithLogout,{})}),/*#__PURE__*/_jsx(OpenModal,{api:api,modalview:modalview,open:open,openevent:openevent,invoiceFormData:invoiceFormData}),/*#__PURE__*/_jsxs(\"div\",{className:\"viewInvoicePageContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"pageheading\",children:\"View Your Invoices\"}),/*#__PURE__*/_jsx(\"div\",{className:\"searchbarstyle\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Phone Number / Customer Name\",onChange:function onChange(e){return setQuery(e.target.value);}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"displayContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"backarrow\",children:/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){navigate(\"/main\");},children:/*#__PURE__*/_jsx(ArrowBackIcon,{})})}),/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:invoiceData.length!=0&&/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"theadalter\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Invoice date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Invoice no\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Customer name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Phone Number Alter One\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Phone Number Alter Two\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:invoiceData.filter(function(user){return user.customer_name.toLowerCase().includes(query)||user.invoice_no.toString().includes(query);}).map(function(data,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:data.delivery_date!=null?moment(data.delivery_date).format('YYYY-MM-DD'):data.delivery_date}),/*#__PURE__*/_jsx(\"td\",{children:data.invoice_no}),/*#__PURE__*/_jsx(\"td\",{children:data.customer_name}),/*#__PURE__*/_jsx(\"td\",{children:data.phone_number}),/*#__PURE__*/_jsx(\"td\",{children:data.phone_number_alter_one}),/*#__PURE__*/_jsx(\"td\",{children:data.phone_number_alter_two}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"btnstyle\",children:/*#__PURE__*/_jsx(Button,{id:\"btn\"// type=\"button\" \n,\"data-bs-toggle\":\"modal\",\"data-bs-target\":\"#exampleModal\",onClick:function onClick(){openinvoiceevent(data.invoice_no);},children:\"View Invoice\"})}),/*#__PURE__*/_jsx(FullScreenModal,{api:api,invoiceFormData:invoiceFormData})]})]},i);})})]})}),invoiceData.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\" no data found! \"})]})]})]});};export default ViewInvoicePage;","map":{"version":3,"names":["React","useEffect","useState","ArrowBackIcon","OpenModal","useNavigate","HeaderWithLogout","moment","FullScreenModal","Button","ViewInvoicePage","api","invoiceData","setInvoiceData","invoiceFormData","setInvoiceFormData","searchData","setSearchData","modalview","setModalview","query","setQuery","open","setOpen","openevent","e","navigate","onHandleChangeEvent","event","target","value","check","setcheck","JSON","parse","window","localStorage","getItem","get","then","res","data","openinvoiceevent","invoiceNo","post","params","length","filter","user","customer_name","toLowerCase","includes","invoice_no","toString","map","i","delivery_date","format","phone_number","phone_number_alter_one","phone_number_alter_two"],"sources":["/Users/rashmishrees/Documents/My projects to show case/d/sdd/src/pages/ViewInvoicePage/ViewInvoicePage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport OpenModal from '../../components/molecules/OpenModal/OpenModal';\nimport { useNavigate } from 'react-router-dom';\nimport HeaderWithLogout from '../../pages/Header/HeaderWithLogout';\nimport moment from 'moment';\nimport FullScreenModal from \"../../components/molecules/FullScreenModal/FullScreenModal\";\nimport '../../style/style.css';\nimport Button from '@mui/material/Button';\n\nconst ViewInvoicePage = ({\n    api\n}) => {\n    const [invoiceData, setInvoiceData] = useState([]);\n    const [invoiceFormData, setInvoiceFormData] = useState([]);\n    const [searchData, setSearchData] = useState('');\n    const [modalview, setModalview] = useState('');\n    const [query, setQuery] = useState('');\n    const [open, setOpen] = useState(false);\n    const openevent = (e) =>{\n      setOpen(e)\n    }\n    let navigate = useNavigate();\n    const onHandleChangeEvent = (event) => {\n        setSearchData(event.target.value);\n    }\n    const [check, setcheck] = useState(false);\n    useEffect(() => {\n      setcheck(JSON.parse(window.localStorage.getItem('logoutbtn')));\n    }, []);\n    useEffect(()=>{\n      if(check == null){\n        navigate('/');\n      }\n    },[check])\n    useEffect(()=>{\n        api.get('/delivery/getInvoices')\n        .then((res) => {\n            setInvoiceData(res.data);\n        })\n    },[])\n    const openinvoiceevent = (invoiceNo) => {\n        api.post('/delivery/getDeliveryReportData', {\n            params: {\n                invoiceNo\n            }\n        }\n        )\n            .then((res) => {\n                setInvoiceFormData(res.data);\n            })\n    }\n    return (\n        <div>\n            <div>\n                <HeaderWithLogout />\n            </div>\n            <OpenModal\n                api={api}\n                modalview={modalview}\n                open={open}\n                openevent={openevent}\n                invoiceFormData={invoiceFormData}\n            />\n            <div className=\"viewInvoicePageContainer\">\n                <div className=\"pageheading\">\n                    View Your Invoices\n                </div>\n                <div className=\"searchbarstyle\">\n                <input\n                    type=\"text\"\n                    placeholder=\"Phone Number / Customer Name\"\n                    onChange={(e)=>setQuery(e.target.value)}\n                />\n                </div>\n                <div className=\"displayContainer\">\n                    <div className=\"backarrow\">\n                        <p\n                            onClick={() => {\n                                navigate(\"/main\");\n                            }}\n                        ><ArrowBackIcon /></p>\n                    </div>\n                    <div className=\"table-responsive\">\n                        {\n                            invoiceData.length != 0 &&\n                            <table className=\"table table-striped table-bordered\">\n                                <thead className=\"theadalter\">\n                                    <tr>\n                                        <th>Invoice date</th>\n                                        <th>Invoice no</th>\n                                        <th>Customer name</th>\n                                        <th>Phone Number</th>\n                                        <th>Phone Number Alter One</th>\n                                        <th>Phone Number Alter Two</th>\n                                        <th>Action</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {\n                                        invoiceData.filter((user=>\n                                            user.customer_name.toLowerCase().includes(query) ||\n                                            user.invoice_no.toString().includes(query)\n                                            )).map((data, i) => (\n                                            <tr key={i}>\n                                                <td>\n                                                    {\n                                                        data.delivery_date != null ?\n                                                        moment(data.delivery_date).format('YYYY-MM-DD'):\n                                                        data.delivery_date\n                                                    }\n                                                </td>\n                                                <td>{data.invoice_no}</td>\n                                                <td>{data.customer_name}</td>\n                                                <td>{data.phone_number}</td>\n                                                <td>{data.phone_number_alter_one}</td>\n                                                <td>{data.phone_number_alter_two}</td>\n                                                <td>\n                                                <div className='btnstyle'>\n                                                    <Button \n                                                        id=\"btn\"\n                                                        // type=\"button\" \n                                                        data-bs-toggle=\"modal\"\n                                                        data-bs-target=\"#exampleModal\"\n                                                        onClick={()=>{\n                                                            openinvoiceevent(data.invoice_no);\n                                                        }}\n                                                        >\n                                                            View Invoice\n                                                    </Button>\n                                                </div>\n                                                    <FullScreenModal \n                                                       api={api}\n                                                       invoiceFormData={invoiceFormData}                                                    />\n                                                </td>\n                                            </tr>\n                                        ))\n                                    }\n                                </tbody>\n                            </table>\n                        }\n                    </div>\n                    {\n                        invoiceData.length === 0 &&\n                        <p> no data found! </p>\n                    }\n                </div>\n            </div>\n        </div>\n    );\n}\nexport default ViewInvoicePage;"],"mappings":"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"},"metadata":{},"sourceType":"module"}