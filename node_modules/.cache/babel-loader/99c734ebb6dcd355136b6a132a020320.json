{"ast":null,"code":"import _objectSpread from\"/Users/rashmishrees/Desktop/prabhu-invoice-project/rashmi-work-done/sdd_using_axios/sddusingaxios/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/rashmishrees/Desktop/prabhu-invoice-project/rashmi-work-done/sdd_using_axios/sddusingaxios/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import CustomizedSearchBar from'../../atoms/CustomizedSearchBar/CustomizedSearchBar';import CustomizedDownload from'../../atoms/CustomizedDownload/CustomizedDownload';import CustomizedPrint from'../../atoms/CustomizedPrint/CustomizedPrint';import{CSVLink}from\"react-csv\";import OpenModal from'../../molecules/OpenModal/OpenModal';import CustomizedEditIcon from'../../atoms/CustomizedEditIcon/CustomizedEditIcon';import moment from'moment';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DisplayCustomerTable=function DisplayCustomerTable(_ref){var currentstatus=_ref.currentstatus,setTableDataEvent=_ref.setTableDataEvent,tabledata=_ref.tabledata,api=_ref.api;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),filterflag=_useState2[0],setfilterflag=_useState2[1];var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),searchvalue=_React$useState2[0],setSearchvalue=_React$useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),rowdata=_useState4[0],setrowdata=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),modalview=_useState6[0],setmodalview=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),open=_useState8[0],setOpen=_useState8[1];var openevent=function openevent(e){setOpen(e);};useEffect(function(){if(filterflag&&currentstatus){statusfiltercustomerdata();}else{displayCustomerFollowUpData();}},[currentstatus]);var headers=[{label:'Comments',key:'comments'},{label:'Customer address',key:'customer_address'},{label:'Customer name',key:'customer_name'},{label:'Customer reference No',key:'customer_reference_no'},{label:'Enquired product',key:'enquired_product'},{label:'Enquired product hsn code',key:'enquired_product_hsn_code'},{label:'Enquired date',key:'enquiry_date'},{label:'Final status',key:'final_status'},{label:'Follow up call',key:'follow_up_call'},{label:'Phone number',key:'phone_number'},{label:'Quantity',key:'quantity'}];var csvReport={filename:'CustomerReports.csv',headers:headers,data:tabledata};var rowdataevent=function rowdataevent(e){setrowdata(e);};var displayCustomerFollowUpData=function displayCustomerFollowUpData(){api.get('customer/displayCustomerFollowUpData').then(function(res){setTableDataEvent(res.data);setfilterflag(true);});};useEffect(function(){if(searchvalue===\"\"){displayCustomerFollowUpData();}},[searchvalue]);var statusfiltercustomerdata=function statusfiltercustomerdata(){api.post('customer/statusfiltercustomerdata',{params:{status:currentstatus}}).then(function(res){setTableDataEvent(res.data);});};var searchHandle=function searchHandle(e){setSearchvalue(e.target.value);};var searchclicked=function searchclicked(){api.post('customer/getCustomerFollowUpDataCustomer',{params:{searchvalue:searchvalue}}).then(function(res){setTableDataEvent(res.data);});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(OpenModal,{api:api,modalview:modalview,open:open,openevent:openevent,displayCustomerFollowUpData:displayCustomerFollowUpData,rowdata:rowdata}),/*#__PURE__*/_jsx(CustomizedSearchBar,{labelname:\"customer :- phone number / name\",Btnname:\"search\",onHandleChangeEvent:searchHandle,goEventClicked:searchclicked}),/*#__PURE__*/_jsx(\"div\",{children:tabledata&&tabledata.length?/*#__PURE__*/_jsx(CSVLink,_objectSpread(_objectSpread({},csvReport),{},{children:/*#__PURE__*/_jsx(CustomizedDownload,{})})):null}),/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped table-bordered tablebackground\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"theadalter\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Customer Reference Number\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Enquiry Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Customer Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Customer Address\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Enquired Product Hsn Code\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Enquired Product\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Comments\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Follow Up Call \"}),/*#__PURE__*/_jsx(\"th\",{children:\"Final Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:tabledata&&tabledata.length?tabledata.map(function(data,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[data.customer_reference_no,\" \"]}),/*#__PURE__*/_jsx(\"td\",{children:data.enquiry_date!=null?moment(data.enquiry_date).format('YYYY-MM-DD'):data.enquiry_date}),/*#__PURE__*/_jsx(\"td\",{children:data.customer_name}),/*#__PURE__*/_jsxs(\"td\",{children:[data.customer_address,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[data.phone_number,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[data.product_hsn_code,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[data.product,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[data.quantity,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[data.comments,\" \"]}),/*#__PURE__*/_jsx(\"td\",{children:data.follow_up_call!=null?moment(data.follow_up_call).format('YYYY-MM-DD'):data.follow_up_call}),/*#__PURE__*/_jsxs(\"td\",{children:[data.final_status,\" \"]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(CustomizedEditIcon,{onClick:function onClick(){rowdataevent(data);setmodalview(\"customerfollowupform\");openevent(true);}})})]},i);}):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:12,children:\"No Record!\"})})})]})})]});};export default DisplayCustomerTable;","map":{"version":3,"names":["React","useEffect","useState","CustomizedSearchBar","CustomizedDownload","CustomizedPrint","CSVLink","OpenModal","CustomizedEditIcon","moment","DisplayCustomerTable","currentstatus","setTableDataEvent","tabledata","api","filterflag","setfilterflag","searchvalue","setSearchvalue","rowdata","setrowdata","modalview","setmodalview","open","setOpen","openevent","e","statusfiltercustomerdata","displayCustomerFollowUpData","headers","label","key","csvReport","filename","data","rowdataevent","get","then","res","post","params","status","searchHandle","target","value","searchclicked","length","map","i","customer_reference_no","enquiry_date","format","customer_name","customer_address","phone_number","product_hsn_code","product","quantity","comments","follow_up_call","final_status"],"sources":["/Users/rashmishrees/Desktop/prabhu-invoice-project/rashmi-work-done/sdd_using_axios/sddusingaxios/src/components/molecules/DisplayCustomerTable/DisplayCustomerTable.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport CustomizedSearchBar from '../../atoms/CustomizedSearchBar/CustomizedSearchBar';\nimport CustomizedDownload from '../../atoms/CustomizedDownload/CustomizedDownload';\nimport CustomizedPrint from '../../atoms/CustomizedPrint/CustomizedPrint';\nimport {CSVLink} from \"react-csv\";\nimport OpenModal from '../../molecules/OpenModal/OpenModal';\nimport CustomizedEditIcon from '../../atoms/CustomizedEditIcon/CustomizedEditIcon';\nimport moment from 'moment';\n\n\nconst DisplayCustomerTable = ({\n    currentstatus,\n    setTableDataEvent,\n    tabledata,\n    api\n}) => {\n    const [filterflag, setfilterflag] = useState(false);\n    const [searchvalue, setSearchvalue] = React.useState('');\n    const [rowdata, setrowdata] = useState({});\n    const [modalview, setmodalview] = useState();\n    const [open, setOpen] = useState(false);\n    const openevent = (e) =>{\n      setOpen(e)\n    }\n    useEffect(()=>{\n        if (filterflag && currentstatus ){\n            statusfiltercustomerdata();\n        }else {\n            displayCustomerFollowUpData();   \n        }\n    },[currentstatus])\n\n    const headers =[\n        {label:'Comments', key:'comments'},\n        {label:'Customer address', key:'customer_address'},\n        {label:'Customer name', key:'customer_name'},\n        {label:'Customer reference No', key:'customer_reference_no'},\n        {label:'Enquired product', key:'enquired_product'},\n        {label:'Enquired product hsn code', key:'enquired_product_hsn_code'},\n        {label:'Enquired date', key:'enquiry_date'},\n        {label:'Final status', key:'final_status'},\n        {label:'Follow up call', key:'follow_up_call'},\n        {label:'Phone number', key:'phone_number'},\n        {label:'Quantity', key:'quantity'}\n      ];\n      const csvReport = {\n        filename:'CustomerReports.csv',\n        headers:headers,\n        data:tabledata\n      }\n    const rowdataevent = (e) => {\n        setrowdata(e);\n    }\n    const displayCustomerFollowUpData = () => {\n        api.get('customer/displayCustomerFollowUpData')\n        .then((res)=>{\n            setTableDataEvent(res.data);\n              setfilterflag(true);\n        })\n    }\n    useEffect(()=>{\n        if (searchvalue === \"\"){\n            displayCustomerFollowUpData();\n        }\n    },[searchvalue])\n    const statusfiltercustomerdata = () => {\n        api.post('customer/statusfiltercustomerdata',{\n            params:{\n                status:currentstatus\n            }\n        })\n        .then((res)=>{\n            setTableDataEvent(res.data);\n        })\n  }\n  const searchHandle = (e) => {\n    setSearchvalue(e.target.value);\n  }\n  const searchclicked = () => {\n    api.post('customer/getCustomerFollowUpDataCustomer',{\n        params:{\n            searchvalue\n        }\n    })\n    .then((res)=>{\n        setTableDataEvent(res.data);\n    })\n  }\n    return(\n        <div>\n             <OpenModal \n                api={api}\n                modalview={modalview}\n                open={open}\n                openevent={openevent}\n                displayCustomerFollowUpData={displayCustomerFollowUpData}\n                rowdata={rowdata} \n            />\n            <CustomizedSearchBar \n                labelname=\"customer :- phone number / name\"\n                Btnname=\"search\"\n                onHandleChangeEvent={searchHandle}\n                goEventClicked={searchclicked}\n            />\n            <div>\n                {\n                    tabledata && tabledata.length ? \n                    <CSVLink {...csvReport}><CustomizedDownload/></CSVLink> : null\n                }\n                {/* <CustomizedPrint /> */}\n            </div>\n            <div className='table-responsive'>\n                <table className='table table-striped table-bordered tablebackground'>\n                    <thead className='theadalter'>\n                        <tr>\n                            <th>Customer Reference Number</th>\n                            <th>Enquiry Date</th>\n                            <th>Customer Name</th>\n                            <th>Customer Address</th>\n                            <th>Phone Number</th>\n                            <th>Enquired Product Hsn Code</th>\n                            <th>Enquired Product</th>\n                            <th>Quantity</th>\n                            <th>Comments</th>\n                            <th>Follow Up Call </th>\n                            <th>Final Status</th>\n                            <th>Action</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {\n                            tabledata && tabledata.length \n                            ? tabledata.map((data, i)=>(\n                                <tr key={i}>\n                                <td>{data.customer_reference_no} </td>\n                                <td>\n                                    {\n                                        data.enquiry_date != null ?\n                                        moment(data.enquiry_date).format('YYYY-MM-DD'):\n                                        data.enquiry_date\n                                    }\n                                </td>\n                                <td>{data.customer_name}</td>\n                                <td>{data.customer_address} </td>\n                                <td>{data.phone_number} </td>\n                                <td>{data.product_hsn_code} </td>\n                                <td>{data.product} </td>\n                                <td>{data.quantity} </td>\n                                <td>{data.comments} </td>\n                                <td>\n                                    {\n                                        data.follow_up_call != null ? \n                                        moment(data.follow_up_call).format('YYYY-MM-DD'):\n                                        data.follow_up_call\n                                    } \n                                </td>\n                                <td>{data.final_status} </td>\n                                <td>\n                                <CustomizedEditIcon \n                                    onClick={()=>{\n                                        rowdataevent(data);\n                                        setmodalview(\"customerfollowupform\");\n                                        openevent(true);\n                                    }}\n                                />\n                                </td>\n                            </tr>\n                            ))\n                            : \n                                <tr>\n                                    <td colSpan={12}>No Record!</td>\n                                </tr>\n                        }\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    );\n}\nexport default DisplayCustomerTable;"],"mappings":"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"},"metadata":{},"sourceType":"module"}