{"ast":null,"code":"import _defineProperty from\"/Users/rashmishrees/Desktop/sdd/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/rashmishrees/Desktop/sdd/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/rashmishrees/Desktop/sdd/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,Fragment}from\"react\";import HeaderWithLogout from'../../pages/Header/HeaderWithLogout';import ArrowBackIcon from'@mui/icons-material/ArrowBack';import EmployeesEditableRow from\"../../components/EmployeesEditableRow/EmployeesEditableRow\";import EmployeesReadOnlyRow from\"../../components/molecules/EmployeesReadOnlyRow/EmployeesReadOnlyRow\";import{useNavigate}from'react-router-dom';import axios from'axios';import CustomizedSaveIcon from\"../../components/atoms/CustomizedSaveIcon/CustomizedSaveIcon\";import'../../style/style.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EmployeeManagementPage=function EmployeeManagementPage(_ref){var api=_ref.api;var navigate=useNavigate();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),employees=_useState2[0],setemployees=_useState2[1];useEffect(function(){api.get('/employees/getusers').then(function(res){setemployees(res.data);});},[]);var getusers=function getusers(){api.get('/employees/getusers').then(function(res){setemployees(res.data);});};var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),check=_useState4[0],setcheck=_useState4[1];useEffect(function(){setcheck(JSON.parse(window.localStorage.getItem('logoutbtn')));},[]);useEffect(function(){if(check==null){navigate('/');}},[check]);var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),EditId=_useState6[0],setEditId=_useState6[1];var _useState7=useState({username:\"\",password:\"\"}),_useState8=_slicedToArray(_useState7,2),editFormData=_useState8[0],setEditFormData=_useState8[1];var _useState9=useState({username:\"\",password:\"\"}),_useState10=_slicedToArray(_useState9,2),addFormData=_useState10[0],setAddFormData=_useState10[1];var handleEditFormSubmit=function handleEditFormSubmit(event){// event.preventDefault();\nconsole.log(\"on submitted\",editFormData);api.put('/employees/edituserdata',{params:{id:EditId,data:editFormData}}).then(function(res){if(res){alert(\"Employee Data Edited Successfully\");getusers();}});setEditId(null);};var handleEditClick=function handleEditClick(event,data){console.log(\"hi edit\",data);setEditId(data.id);var formValues={username:data.username,password:data.password};setEditFormData(formValues);};var handleEditFormChange=function handleEditFormChange(event){event.preventDefault();setEditFormData(_objectSpread(_objectSpread({},editFormData),{},_defineProperty({},event.target.name,event.target.value)));};var handleAddFormChange=function handleAddFormChange(event){event.preventDefault();setAddFormData(_objectSpread(_objectSpread({},addFormData),{},_defineProperty({},event.target.name,event.target.value)));};var handleAddFormSubmit=function handleAddFormSubmit(){api.post('/employees/insertuserdata',{params:{addFormData:addFormData}}).then(function(res){if(res){alert(\"Employee Data Added Successfully\");getusers();}});};var handleCancelClick=function handleCancelClick(){setEditId(null);};var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),useriddelete=_useState12[0],setuseriddelete=_useState12[1];var deletesuperevent=function deletesuperevent(id){setuseriddelete(id);};var handleDeleteClick=function handleDeleteClick(e){if(e==\"yes\"){console.log(\"to be deleted\",useriddelete);axios.delete(\"http://3.84.110.201:3001/employees/deleteuserdata\",{data:{id:useriddelete}}).then(function(res){if(res){getusers();}});}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(HeaderWithLogout,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"reportcontainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"pageheading\",children:\"Employee Management\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"displayContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"backarrow\",children:/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){navigate(\"/main\");},children:/*#__PURE__*/_jsx(ArrowBackIcon,{})})}),/*#__PURE__*/_jsx(\"h2\",{children:\"Add an employee\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"addemployeestyle\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",required:\"required\",placeholder:\"Enter a username...\",onChange:handleAddFormChange}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"password\",required:\"required\",placeholder:\"Enter an password...\",onChange:handleAddFormChange}),/*#__PURE__*/_jsx(CustomizedSaveIcon,{type:\"submit\",onClick:handleAddFormSubmit})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:employees.length!=0&&/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"theadalter\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"User Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:employees&&employees.length&&employees.map(function(data){return/*#__PURE__*/_jsx(Fragment,{children:EditId===data.id?/*#__PURE__*/_jsx(EmployeesEditableRow,{rowdata:data,handleEditFormChange:handleEditFormChange,handleCancelClick:handleCancelClick,handleEditFormSubmit:handleEditFormSubmit}):/*#__PURE__*/_jsx(EmployeesReadOnlyRow,{deletesuperevent:deletesuperevent,handleEditClick:handleEditClick,rowdata:data,handleDeleteClick:handleDeleteClick})});})})]})}),employees.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\" no data found! \"})]})]})]});};export default EmployeeManagementPage;","map":{"version":3,"names":["React","useState","useEffect","Fragment","HeaderWithLogout","ArrowBackIcon","EmployeesEditableRow","EmployeesReadOnlyRow","useNavigate","axios","CustomizedSaveIcon","EmployeeManagementPage","api","navigate","employees","setemployees","get","then","res","data","getusers","check","setcheck","JSON","parse","window","localStorage","getItem","EditId","setEditId","username","password","editFormData","setEditFormData","addFormData","setAddFormData","handleEditFormSubmit","event","console","log","put","params","id","alert","handleEditClick","formValues","handleEditFormChange","preventDefault","target","name","value","handleAddFormChange","handleAddFormSubmit","post","handleCancelClick","useriddelete","setuseriddelete","deletesuperevent","handleDeleteClick","e","delete","length","map"],"sources":["/Users/rashmishrees/Desktop/sdd/src/pages/EmployeeManagementPage/EmployeeManagementPage.js"],"sourcesContent":["import React, {useState, useEffect, Fragment} from \"react\";\nimport HeaderWithLogout from '../../pages/Header/HeaderWithLogout';\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport EmployeesEditableRow from \"../../components/EmployeesEditableRow/EmployeesEditableRow\";\nimport EmployeesReadOnlyRow from \"../../components/molecules/EmployeesReadOnlyRow/EmployeesReadOnlyRow\";\nimport {useNavigate} from 'react-router-dom';\nimport axios from 'axios';\nimport CustomizedSaveIcon from \"../../components/atoms/CustomizedSaveIcon/CustomizedSaveIcon\";\nimport '../../style/style.css';\n\nconst EmployeeManagementPage = ({api}) => {\n    let navigate = useNavigate();\n    const [employees, setemployees] = useState({});\n    useEffect(()=>{\n        api.get('/employees/getusers')\n        .then((res) => {\n            setemployees(res.data);\n        })\n    },[]);\n    const getusers = () => {\n        api.get('/employees/getusers')\n        .then((res) => {\n            setemployees(res.data);\n        })\n    }\n    const [check, setcheck] = useState(false);\n    useEffect(() => {\n      setcheck(JSON.parse(window.localStorage.getItem('logoutbtn')));\n    }, []);\n    useEffect(()=>{\n      if(check == null){\n        navigate('/');\n      }\n    },[check])\n    const [EditId,setEditId] = useState(null);\n    const [editFormData, setEditFormData] = useState({\n        username: \"\",\n        password: \"\"\n      });\n    const [addFormData, setAddFormData] = useState({\n        username: \"\",\n        password: \"\"\n      });\n    const handleEditFormSubmit = (event) => {\n        // event.preventDefault();\n        console.log(\"on submitted\", editFormData);\n        api.put('/employees/edituserdata', {\n            params: {\n                id:EditId,\n                data:editFormData\n            }\n          })\n          .then((res) => {\n            if(res){\n                alert(\"Employee Data Edited Successfully\");\n                getusers();\n            }\n          })\n        setEditId(null);\n      };\n      const handleEditClick = (event, data) => {\n          console.log(\"hi edit\",data);\n            setEditId(data.id);\n    \n        const formValues = {\n          username: data.username,\n          password: data.password\n        };\n    \n        setEditFormData(formValues);\n      };\n      const handleEditFormChange = (event) => {\n        event.preventDefault();\n        setEditFormData({ ...editFormData, [event.target.name]: event.target.value })\n      };\n      const handleAddFormChange = (event) => {\n        event.preventDefault();\n        setAddFormData({ ...addFormData, [event.target.name]: event.target.value })\n      }\n      const handleAddFormSubmit = () => {\n        api.post('/employees/insertuserdata', {\n            params: {\n                addFormData\n            }\n          })\n          .then((res) => {\n            if(res){\n                alert(\"Employee Data Added Successfully\");\n                getusers();\n            }\n          })\n      }\n      const handleCancelClick = () => {\n        setEditId(null);\n      };\n      const [useriddelete, setuseriddelete] = useState();\n      const  deletesuperevent = (id) => {\n        setuseriddelete(id);\n    }\n    const handleDeleteClick = (e) => {\n        if(e == \"yes\"){\n               console.log(\"to be deleted\", useriddelete);\n            axios.delete(`http://3.84.110.201:3001/employees/deleteuserdata`,\n            {\n                data: {\n                    id: useriddelete\n                }\n            })\n            .then((res) => {\n                if(res){\n                    getusers();\n                }\n            })\n        }\n    }\n    return(\n        <div>\n        <div>\n          <HeaderWithLogout />\n        </div>\n        <div className=\"reportcontainer\">\n          <div className=\"pageheading\">\n            Employee Management\n          </div>\n          <div className=\"displayContainer\">\n                    <div className=\"backarrow\">\n                        <p\n                            onClick={() => {\n                                navigate(\"/main\");\n                            }}\n                        ><ArrowBackIcon /></p>\n                    </div>\n\n                    <h2>Add an employee</h2>\n                    <div className=\"addemployeestyle\">\n                        <input\n                        type=\"text\"\n                        name=\"username\"\n                        required=\"required\"\n                        placeholder=\"Enter a username...\"\n                        onChange={handleAddFormChange}\n                        />\n                        <input\n                        type=\"text\"\n                        name=\"password\"\n                        required=\"required\"\n                        placeholder=\"Enter an password...\"\n                        onChange={handleAddFormChange}\n                        />\n                        <CustomizedSaveIcon \n                            type=\"submit\"\n                            onClick={handleAddFormSubmit}\n                        />\n                    </div>\n\n\n                    {/* <form onSubmit={handleEditFormSubmit}> */}\n                    <div className=\"table-responsive\">\n                        {\n                            employees.length != 0 &&\n                                <table className=\"table table-striped table-bordered\">\n                                    <thead className=\"theadalter\">\n                                        <tr>\n                                            <th>User Name</th>\n                                            <th>Password</th>\n                                            <th>Action</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        {\n                                            employees && employees.length &&\n                                            employees.map((data)=>(\n                                                <Fragment>\n                                                {EditId === data.id ? (\n                                                <EmployeesEditableRow\n                                                    rowdata={data}\n                                                    handleEditFormChange={handleEditFormChange}\n                                                    handleCancelClick={handleCancelClick}\n                                                    handleEditFormSubmit={handleEditFormSubmit}\n                                                />\n                                                ) : (\n                                                <EmployeesReadOnlyRow\n                                                deletesuperevent={deletesuperevent}\n                                                    handleEditClick={handleEditClick}\n                                                    rowdata={data}\n                                                    handleDeleteClick={handleDeleteClick}\n                                                />\n                                                )}\n                                            </Fragment>\n                                            ))\n                                        }\n                                    </tbody>\n                                </table>\n                        }\n                    </div>\n                    {/* </form> */}\n                    {\n                        employees.length === 0 &&\n                        <p> no data found! </p>\n                    }\n                </div>\n        </div>\n      </div>\n    );\n}\nexport default EmployeeManagementPage;"],"mappings":"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"},"metadata":{},"sourceType":"module"}